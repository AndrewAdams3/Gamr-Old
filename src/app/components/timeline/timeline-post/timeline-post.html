<div class="panel">
  <div class="panel-heading">
    <div class="media">
      <div class="media-left media-top">
        <a href="#">
          <img class="media-object img-rounded author-image" [attr.src]="post.profile_pic" alt="...">
        </a>
      </div>
      <div class="media-body">
        <p>{{post.display_name}} <small>{{ post.post_date | amTimeAgo }}</small><span class="author-stats">Lvl. 9</span> </p>
        <p>
          <span class="text-container" *ngFor="let chunk of post.text">
             <span id="post-text" class="text-element" [ngSwitch]="chunk.indexOf(post.uuid) == 0">
               <span *ngSwitchCase="true" [innerHtml]="chunk.replace(regex, '')"></span>
               <span *ngSwitchCase="false">{{chunk}}</span>
             </span>
          </span>
        </p>

      </div>
      <div class="image-grid">
        <a href="{{image}}" *ngFor="let image of post.images; let i = index;" [attr.data-lightbox]="post.ID" >
            <img [src]="image" *ngIf="i == 0" class="grid-image img-responsive">
        </a>
        <span class="badge image-count-badge" *ngIf="post.images.length > 1">1 of {{post.images.length}}</span>
      </div>
    </div>
    <div class="actions">
      <!-- Other User -->
      <button class="action-button" 
        *ngIf="post.user_ID != user.ID" 
        (click)="likePost()"
        [ngStyle]="{'background-color':post.liked ? '#985E6D' : '' }"
      >
        <i class="fa fa-heart"></i><span class="action-text">{{post.likes}}</span> 
      </button>
      <!-- Current User -->
      <button class="static-stat" 
        *ngIf="post.user_ID == user.ID"
        [ngStyle]="{'background-color':post.liked ? '#985E6D' : '' }"
      >
        <i class="fa fa-heart" ></i><span class="action-text">{{post.likes}}</span> 
      </button>
      <!-- Other User -->
      <button class="action-button" *ngIf="post.user_ID != user.ID">
        <i class="fa fa-comment"></i> <span class="action-text">{{post.comment_count}}</span><!-- Comments -->
      </button>
      <!-- Current User -->
      <button class="static-stat" *ngIf="post.user_ID == user.ID">
        <i class="fa fa-comment"></i> <span class="action-text">{{post.comment_count}}</span><!-- Comments -->
      </button>
      <!-- Other User -->
      <button class="action-button" *ngIf="post.user_ID != user.ID">
        <i class="fa fa-mail-reply"></i> <span class="action-text">0</span><!-- Shares -->
      </button>
      <!-- Current User -->
      <button class="static-stat" *ngIf="post.user_ID == user.ID">
        <i class="fa fa-mail-reply"></i> <span class="action-text">0</span><!-- Shares -->
      </button>

      <button class="action-button" style="float:right;">
        <i class="glyphicon glyphicon-signal"></i> <span class="action-text">{{post.exp_count}}</span>
      </button>
    </div>
  </div>

  <div class="panel-body">
    <div class="comment-form">
      <div class="media">
        <div class="media-left media-top">
          <a href="#">
            <img class="media-object img-rounded input-user-image" [src]="user.profile_pic" alt="...">
          </a>
        </div>
        <div class="media-body">
          <input [(ngModel)]="postText" class="form-control input-box" aria-describedby="basic-addon2" id="text-post" placeholder="What do you have to say?"/>
        </div>
      </div>
    </div>
  </div>
  
</div>
